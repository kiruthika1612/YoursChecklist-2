import { __decorate } from "tslib";
import { Component, Input, Output } from '@angular/core';
import { Subject } from 'rxjs';
var LivechatWidgetComponent = /** @class */ (function () {
    function LivechatWidgetComponent() {
        this.onChatLoaded = new Subject();
        this.onAfterLoad = new Subject();
        this.onBeforeLoad = new Subject();
        this.onChatEnded = new Subject();
        this.onChatStarted = new Subject();
        this.onChatStateChanged = new Subject();
        this.onChatWindowHidden = new Subject();
        this.onChatWindowMinimized = new Subject();
        this.onChatWindowOpened = new Subject();
        this.onMessage = new Subject();
        this.onPostchatSurveySubmitted = new Subject();
        this.onPrechatSurveySubmitted = new Subject();
        this.onRatingCommentSubmitted = new Subject();
        this.onRatingSubmitted = new Subject();
        this.onTicketCreated = new Subject();
        this.onWidgetResize = new Subject();
    }
    LivechatWidgetComponent.prototype.ngOnInit = function () {
        var _this = this;
        if (!window['LC_API']) {
            window['__lc'] = window['__lc'] || {};
            window['__lc'].license = this.licenseId;
            window['__lc'].group = this.group;
            window['__lc'].chat_between_groups = this.chatBetweenGroups;
            window['__lc'].params = this.params;
            window['__lc'].visitor = this.visitor;
            window['__lc'].ga_version = this.gaVersion;
            var lc = document.createElement('script');
            lc.type = 'text/javascript';
            lc.async = true;
            lc.src = 'https://cdn.livechatinc.com/tracking.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(lc, s);
            lc.addEventListener('load', function () {
                _this._chatLoaded(window['LC_API']);
            });
            lc.addEventListener('error', function (error) {
                console.error(error);
            });
        }
    };
    LivechatWidgetComponent.prototype._chatLoaded = function (LC_API) {
        this._setCallbacks(LC_API);
        this._setMethods(LC_API);
        this.onChatLoaded.next(LC_API);
    };
    LivechatWidgetComponent.prototype._setCallbacks = function (LC_API) {
        var _this = this;
        LC_API.on_after_load = function () { return _this.onAfterLoad.next(); };
        LC_API.on_before_load = function () { return _this.onBeforeLoad.next(); };
        LC_API.on_chat_ended = function () { return _this.onChatEnded.next(); };
        LC_API.on_chat_started = function (data) { return _this.onChatStarted.next(data); };
        LC_API.on_chat_state_changed = function (data) { return _this.onChatStateChanged.next(data); };
        LC_API.on_chat_window_hidden = function () { return _this.onChatWindowHidden.next(); };
        LC_API.on_chat_window_minimized = function () { return _this.onChatWindowMinimized.next(); };
        LC_API.on_chat_window_opened = function () { return _this.onChatWindowOpened.next(); };
        LC_API.on_message = function (data) { return _this.onMessage.next(data); };
        LC_API.on_postchat_survey_submitted = function (data) { return _this.onPostchatSurveySubmitted.next(data); };
        LC_API.on_prechat_survey_submitted = function (data) { return _this.onPrechatSurveySubmitted.next(data); };
        LC_API.on_rating_comment_submitted = function (data) { return _this.onRatingCommentSubmitted.next(data); };
        LC_API.on_rating_submitted = function (data) { return _this.onRatingSubmitted.next(data); };
        LC_API.on_ticket_created = function (data) { return _this.onTicketCreated.next(data); };
    };
    LivechatWidgetComponent.prototype._setMethods = function (LC_API) {
        this.agentsAreAvailable = function () { return LC_API.agents_are_available(); };
        this.chatRunning = function () { return LC_API.chat_running(); };
        this.chatWindowHidden = function () { return LC_API.chat_window_hidden(); };
        this.chatWindowMaximized = function () { return LC_API.chat_window_maximized(); };
        this.chatWindowMinimized = function () { return LC_API.chat_window_minimized(); };
        this.closeChat = function () { return LC_API.close_chat(); };
        this.getChatId = function () { return LC_API.get_chat_id(); };
        this.getChatsNumber = function () { return LC_API.get_chats_number(); };
        this.getLastVisitTimestamp = function () { return LC_API.get_last_visit_timestamp(); };
        this.getPageViewsNumber = function () { return LC_API.get_page_views_number(); };
        this.getVisitorId = function () { return LC_API.get_visitor_id(); };
        this.getVisitsNumber = function () { return LC_API.get_visits_number(); };
        this.hideChatWindow = function () { return LC_API.hide_chat_window(); };
        this.minimizeChatWindow = function () { return LC_API.minimize_chat_window(); };
        this.openChatWindow = function () { return LC_API.open_chat_window(); };
        this.setCustomVariables = function (t) { return LC_API.set_custom_variables(t); };
        this.setVisitorEmail = function (t) { return LC_API.set_visitor_email(t); };
        this.setVisitorName = function (t) { return LC_API.set_visitor_name(t); };
        this.triggerSalesTracker = function (e, t) { return LC_API.trigger_sales_tracker(e, t); };
        this.updateCustomVariables = function (t) { return LC_API.update_custom_variables(t); };
        this.visitorEngaged = function () { return LC_API.visitor_engaged(); };
        this.visitorQueued = function () { return LC_API.visitor_queued(); };
    };
    __decorate([
        Input()
    ], LivechatWidgetComponent.prototype, "licenseId", void 0);
    __decorate([
        Input()
    ], LivechatWidgetComponent.prototype, "group", void 0);
    __decorate([
        Input()
    ], LivechatWidgetComponent.prototype, "chatBetweenGroups", void 0);
    __decorate([
        Input()
    ], LivechatWidgetComponent.prototype, "params", void 0);
    __decorate([
        Input()
    ], LivechatWidgetComponent.prototype, "visitor", void 0);
    __decorate([
        Input()
    ], LivechatWidgetComponent.prototype, "gaVersion", void 0);
    __decorate([
        Output()
    ], LivechatWidgetComponent.prototype, "onChatLoaded", void 0);
    __decorate([
        Output()
    ], LivechatWidgetComponent.prototype, "onAfterLoad", void 0);
    __decorate([
        Output()
    ], LivechatWidgetComponent.prototype, "onBeforeLoad", void 0);
    __decorate([
        Output()
    ], LivechatWidgetComponent.prototype, "onChatEnded", void 0);
    __decorate([
        Output()
    ], LivechatWidgetComponent.prototype, "onChatStarted", void 0);
    __decorate([
        Output()
    ], LivechatWidgetComponent.prototype, "onChatStateChanged", void 0);
    __decorate([
        Output()
    ], LivechatWidgetComponent.prototype, "onChatWindowHidden", void 0);
    __decorate([
        Output()
    ], LivechatWidgetComponent.prototype, "onChatWindowMinimized", void 0);
    __decorate([
        Output()
    ], LivechatWidgetComponent.prototype, "onChatWindowOpened", void 0);
    __decorate([
        Output()
    ], LivechatWidgetComponent.prototype, "onMessage", void 0);
    __decorate([
        Output()
    ], LivechatWidgetComponent.prototype, "onPostchatSurveySubmitted", void 0);
    __decorate([
        Output()
    ], LivechatWidgetComponent.prototype, "onPrechatSurveySubmitted", void 0);
    __decorate([
        Output()
    ], LivechatWidgetComponent.prototype, "onRatingCommentSubmitted", void 0);
    __decorate([
        Output()
    ], LivechatWidgetComponent.prototype, "onRatingSubmitted", void 0);
    __decorate([
        Output()
    ], LivechatWidgetComponent.prototype, "onTicketCreated", void 0);
    __decorate([
        Output()
    ], LivechatWidgetComponent.prototype, "onWidgetResize", void 0);
    LivechatWidgetComponent = __decorate([
        Component({
            selector: 'livechat-widget',
            template: ""
        })
    ], LivechatWidgetComponent);
    return LivechatWidgetComponent;
}());
export { LivechatWidgetComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGl2ZWNoYXQtd2lkZ2V0LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BsaXZlY2hhdC9hbmd1bGFyLXdpZGdldC8iLCJzb3VyY2VzIjpbInNyYy9saXZlY2hhdC13aWRnZXQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFVLEtBQUssRUFBRSxNQUFNLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFakUsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQU8vQjtJQStDRTtRQXhDaUIsaUJBQVksR0FBRyxJQUFJLE9BQU8sRUFBMEIsQ0FBQztRQUNyRCxnQkFBVyxHQUFHLElBQUksT0FBTyxFQUFFLENBQUM7UUFDNUIsaUJBQVksR0FBRyxJQUFJLE9BQU8sRUFBRSxDQUFDO1FBQzdCLGdCQUFXLEdBQUcsSUFBSSxPQUFPLEVBQUUsQ0FBQztRQUM1QixrQkFBYSxHQUFHLElBQUksT0FBTyxFQUFPLENBQUM7UUFDbkMsdUJBQWtCLEdBQUcsSUFBSSxPQUFPLEVBQU8sQ0FBQztRQUN4Qyx1QkFBa0IsR0FBRyxJQUFJLE9BQU8sRUFBRSxDQUFDO1FBQ25DLDBCQUFxQixHQUFHLElBQUksT0FBTyxFQUFFLENBQUM7UUFDdEMsdUJBQWtCLEdBQUcsSUFBSSxPQUFPLEVBQUUsQ0FBQztRQUNuQyxjQUFTLEdBQUcsSUFBSSxPQUFPLEVBQU8sQ0FBQztRQUMvQiw4QkFBeUIsR0FBRyxJQUFJLE9BQU8sRUFBTyxDQUFDO1FBQy9DLDZCQUF3QixHQUFHLElBQUksT0FBTyxFQUFPLENBQUM7UUFDOUMsNkJBQXdCLEdBQUcsSUFBSSxPQUFPLEVBQU8sQ0FBQztRQUM5QyxzQkFBaUIsR0FBRyxJQUFJLE9BQU8sRUFBTyxDQUFDO1FBQ3ZDLG9CQUFlLEdBQUcsSUFBSSxPQUFPLEVBQU8sQ0FBQztRQUNyQyxtQkFBYyxHQUFHLElBQUksT0FBTyxFQUFFLENBQUM7SUF5QmhDLENBQUM7SUFFakIs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O1FBQVIsS0FBSyxFQUFFO3NFQUE0QjtJQUMzQjtRQUFSLEtBQUssRUFBRTsyREFBc0M7SUFDckM7UUFBUixLQUFLLEVBQUU7NERBQTJDO0lBQzFDO1FBQVIsS0FBSyxFQUFFOzhEQUFtQjtJQUNqQjtRQUFULE1BQU0sRUFBRTtpRUFBNkQ7SUFDNUQ7UUFBVCxNQUFNLEVBQUU7Z0VBQW9DO0lBQ25DO1FBQVQsTUFBTSxFQUFFO2lFQUFxQztJQUNwQztRQUFULE1BQU0sRUFBRTtnRUFBb0M7SUFDbkM7UUFBVCxNQUFNLEVBQUU7a0VBQTJDO0lBQzFDO1FBQVQsTUFBTSxFQUFFO3VFQUFnRDtJQUMvQztRQUFULE1BQU0sRUFBRTt1RUFBMkM7SUFDMUM7UUFBVCxNQUFNLEVBQUU7MEVBQThDO0lBQzdDO1FBQVQsTUFBTSxFQUFFO3VFQUEyQztJQUMxQztRQUFULE1BQU0sRUFBRTs4REFBdUM7SUFDdEM7UUFBVCxNQUFNLEVBQUU7OEVBQXVEO0lBQ3REO1FBQVQsTUFBTSxFQUFFOzZFQUFzRDtJQUNyRDtRQUFULE1BQU0sRUFBRTs2RUFBc0Q7SUFDckQ7UUFBVCxNQUFNLEVBQUU7c0VBQStDO0lBQzlDO1FBQVQsTUFBTSxFQUFFO29FQUE2QztJQUM1QztRQUFULE1BQU0sRUFBRTttRUFBdUM7SUF0QnJDLHVCQUF1QjtRQUxuQyxTQUFTLENBQUM7WUFDVCxRQUFRLEVBQUUsaUJBQWlCO1lBQzNCLFFBQVEsRUFBRSxFQUFFO1NBRWIsQ0FBQztPQUNXLHVCQUF1QixDQXdIbkM7SUFBRCw4QkFBQztDQUFBLEFBeEhELElBd0hDO1NBeEhZLHVCQUF1QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBJbnB1dCwgT3V0cHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBMaXZlQ2hhdFdpZGdldEFwaU1vZGVsIH0gZnJvbSAnLi9saXZlY2hhdC13aWRnZXQubW9kZWxzJztcbmltcG9ydCB7IFN1YmplY3QgfSBmcm9tICdyeGpzJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnbGl2ZWNoYXQtd2lkZ2V0JyxcbiAgdGVtcGxhdGU6IGBgLFxuICBzdHlsZXM6IFtdXG59KVxuZXhwb3J0IGNsYXNzIExpdmVjaGF0V2lkZ2V0Q29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcbiAgQElucHV0KCkgbGljZW5zZUlkOiBudW1iZXI7XG4gIEBJbnB1dCgpIGdyb3VwOiBudW1iZXI7XG4gIEBJbnB1dCgpIGNoYXRCZXR3ZWVuR3JvdXBzOiBib29sZWFuO1xuICBASW5wdXQoKSBwYXJhbXM6IHsgbmFtZTogc3RyaW5nLCB2YWx1ZTogYW55IH07XG4gIEBJbnB1dCgpIHZpc2l0b3I6IHsgbmFtZTogc3RyaW5nLCBlbWFpbDogc3RyaW5nLCB9O1xuICBASW5wdXQoKSBnYVZlcnNpb246IHN0cmluZztcbiAgQE91dHB1dCgpIHB1YmxpYyBvbkNoYXRMb2FkZWQgPSBuZXcgU3ViamVjdDxMaXZlQ2hhdFdpZGdldEFwaU1vZGVsPigpO1xuICBAT3V0cHV0KCkgcHVibGljIG9uQWZ0ZXJMb2FkID0gbmV3IFN1YmplY3QoKTtcbiAgQE91dHB1dCgpIHB1YmxpYyBvbkJlZm9yZUxvYWQgPSBuZXcgU3ViamVjdCgpO1xuICBAT3V0cHV0KCkgcHVibGljIG9uQ2hhdEVuZGVkID0gbmV3IFN1YmplY3QoKTtcbiAgQE91dHB1dCgpIHB1YmxpYyBvbkNoYXRTdGFydGVkID0gbmV3IFN1YmplY3Q8YW55PigpO1xuICBAT3V0cHV0KCkgcHVibGljIG9uQ2hhdFN0YXRlQ2hhbmdlZCA9IG5ldyBTdWJqZWN0PGFueT4oKTtcbiAgQE91dHB1dCgpIHB1YmxpYyBvbkNoYXRXaW5kb3dIaWRkZW4gPSBuZXcgU3ViamVjdCgpO1xuICBAT3V0cHV0KCkgcHVibGljIG9uQ2hhdFdpbmRvd01pbmltaXplZCA9IG5ldyBTdWJqZWN0KCk7XG4gIEBPdXRwdXQoKSBwdWJsaWMgb25DaGF0V2luZG93T3BlbmVkID0gbmV3IFN1YmplY3QoKTsgZGF0YVxuICBAT3V0cHV0KCkgcHVibGljIG9uTWVzc2FnZSA9IG5ldyBTdWJqZWN0PGFueT4oKTtcbiAgQE91dHB1dCgpIHB1YmxpYyBvblBvc3RjaGF0U3VydmV5U3VibWl0dGVkID0gbmV3IFN1YmplY3Q8YW55PigpO1xuICBAT3V0cHV0KCkgcHVibGljIG9uUHJlY2hhdFN1cnZleVN1Ym1pdHRlZCA9IG5ldyBTdWJqZWN0PGFueT4oKTtcbiAgQE91dHB1dCgpIHB1YmxpYyBvblJhdGluZ0NvbW1lbnRTdWJtaXR0ZWQgPSBuZXcgU3ViamVjdDxhbnk+KCk7XG4gIEBPdXRwdXQoKSBwdWJsaWMgb25SYXRpbmdTdWJtaXR0ZWQgPSBuZXcgU3ViamVjdDxhbnk+KCk7XG4gIEBPdXRwdXQoKSBwdWJsaWMgb25UaWNrZXRDcmVhdGVkID0gbmV3IFN1YmplY3Q8YW55PigpO1xuICBAT3V0cHV0KCkgcHVibGljIG9uV2lkZ2V0UmVzaXplID0gbmV3IFN1YmplY3QoKTtcblxuICBwdWJsaWMgYWdlbnRzQXJlQXZhaWxhYmxlOiBGdW5jdGlvbjtcbiAgcHVibGljIGNoYXRSdW5uaW5nOiBGdW5jdGlvbjtcbiAgcHVibGljIGNoYXRXaW5kb3dIaWRkZW46IEZ1bmN0aW9uO1xuICBwdWJsaWMgY2hhdFdpbmRvd01heGltaXplZDogRnVuY3Rpb247XG4gIHB1YmxpYyBjaGF0V2luZG93TWluaW1pemVkOiBGdW5jdGlvbjtcbiAgcHVibGljIGNsb3NlQ2hhdDogRnVuY3Rpb247XG4gIHB1YmxpYyBnZXRDaGF0SWQ6IEZ1bmN0aW9uO1xuICBwdWJsaWMgZ2V0Q2hhdHNOdW1iZXI6IEZ1bmN0aW9uO1xuICBwdWJsaWMgZ2V0TGFzdFZpc2l0VGltZXN0YW1wOiBGdW5jdGlvbjtcbiAgcHVibGljIGdldFBhZ2VWaWV3c051bWJlcjogRnVuY3Rpb247XG4gIHB1YmxpYyBnZXRWaXNpdG9ySWQ6IEZ1bmN0aW9uO1xuICBwdWJsaWMgZ2V0VmlzaXRzTnVtYmVyOiBGdW5jdGlvbjtcbiAgcHVibGljIGhpZGVDaGF0V2luZG93OiBGdW5jdGlvbjtcbiAgcHVibGljIG1pbmltaXplQ2hhdFdpbmRvdzogRnVuY3Rpb247XG4gIHB1YmxpYyBvcGVuQ2hhdFdpbmRvdzogRnVuY3Rpb247XG4gIHB1YmxpYyBzZXRDdXN0b21WYXJpYWJsZXM6IEZ1bmN0aW9uO1xuICBwdWJsaWMgc2V0VmlzaXRvckVtYWlsOiBGdW5jdGlvbjtcbiAgcHVibGljIHNldFZpc2l0b3JOYW1lOiBGdW5jdGlvbjtcbiAgcHVibGljIHRyaWdnZXJTYWxlc1RyYWNrZXI6IEZ1bmN0aW9uO1xuICBwdWJsaWMgdXBkYXRlQ3VzdG9tVmFyaWFibGVzOiBGdW5jdGlvbjtcbiAgcHVibGljIHZpc2l0b3JFbmdhZ2VkOiBGdW5jdGlvbjtcbiAgcHVibGljIHZpc2l0b3JRdWV1ZWQ6IEZ1bmN0aW9uO1xuXG4gIGNvbnN0cnVjdG9yKCkgeyB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgaWYgKCF3aW5kb3dbJ0xDX0FQSSddKSB7XG4gICAgICB3aW5kb3dbJ19fbGMnXSA9IHdpbmRvd1snX19sYyddIHx8IHt9O1xuICAgICAgd2luZG93WydfX2xjJ10ubGljZW5zZSA9IHRoaXMubGljZW5zZUlkO1xuICAgICAgd2luZG93WydfX2xjJ10uZ3JvdXAgPSB0aGlzLmdyb3VwO1xuICAgICAgd2luZG93WydfX2xjJ10uY2hhdF9iZXR3ZWVuX2dyb3VwcyA9IHRoaXMuY2hhdEJldHdlZW5Hcm91cHM7XG4gICAgICB3aW5kb3dbJ19fbGMnXS5wYXJhbXMgPSB0aGlzLnBhcmFtcztcbiAgICAgIHdpbmRvd1snX19sYyddLnZpc2l0b3IgPSB0aGlzLnZpc2l0b3I7XG4gICAgICB3aW5kb3dbJ19fbGMnXS5nYV92ZXJzaW9uID0gdGhpcy5nYVZlcnNpb247XG4gICAgICBjb25zdCBsYyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgICAgbGMudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnO1xuICAgICAgbGMuYXN5bmMgPSB0cnVlO1xuICAgICAgbGMuc3JjID0gJ2h0dHBzOi8vY2RuLmxpdmVjaGF0aW5jLmNvbS90cmFja2luZy5qcyc7XG4gICAgICBjb25zdCBzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpWzBdO1xuICAgICAgcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShsYywgcyk7XG4gICAgICBsYy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGF0TG9hZGVkKHdpbmRvd1snTENfQVBJJ10pO1xuICAgICAgfSk7XG4gICAgICBsYy5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIChlcnJvcikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX2NoYXRMb2FkZWQoTENfQVBJOiBMaXZlQ2hhdFdpZGdldEFwaU1vZGVsKSB7XG4gICAgdGhpcy5fc2V0Q2FsbGJhY2tzKExDX0FQSSk7XG4gICAgdGhpcy5fc2V0TWV0aG9kcyhMQ19BUEkpO1xuICAgIHRoaXMub25DaGF0TG9hZGVkLm5leHQoTENfQVBJKTtcbiAgfVxuXG4gIHByaXZhdGUgX3NldENhbGxiYWNrcyhMQ19BUEk6IExpdmVDaGF0V2lkZ2V0QXBpTW9kZWwpIHtcbiAgICBMQ19BUEkub25fYWZ0ZXJfbG9hZCA9ICgpID0+IHRoaXMub25BZnRlckxvYWQubmV4dCgpO1xuICAgIExDX0FQSS5vbl9iZWZvcmVfbG9hZCA9ICgpID0+IHRoaXMub25CZWZvcmVMb2FkLm5leHQoKTtcbiAgICBMQ19BUEkub25fY2hhdF9lbmRlZCA9ICgpID0+IHRoaXMub25DaGF0RW5kZWQubmV4dCgpO1xuICAgIExDX0FQSS5vbl9jaGF0X3N0YXJ0ZWQgPSAoZGF0YSkgPT4gdGhpcy5vbkNoYXRTdGFydGVkLm5leHQoZGF0YSk7XG4gICAgTENfQVBJLm9uX2NoYXRfc3RhdGVfY2hhbmdlZCA9IChkYXRhKSA9PiB0aGlzLm9uQ2hhdFN0YXRlQ2hhbmdlZC5uZXh0KGRhdGEpO1xuICAgIExDX0FQSS5vbl9jaGF0X3dpbmRvd19oaWRkZW4gPSAoKSA9PiB0aGlzLm9uQ2hhdFdpbmRvd0hpZGRlbi5uZXh0KCk7XG4gICAgTENfQVBJLm9uX2NoYXRfd2luZG93X21pbmltaXplZCA9ICgpID0+IHRoaXMub25DaGF0V2luZG93TWluaW1pemVkLm5leHQoKTtcbiAgICBMQ19BUEkub25fY2hhdF93aW5kb3dfb3BlbmVkID0gKCkgPT4gdGhpcy5vbkNoYXRXaW5kb3dPcGVuZWQubmV4dCgpO1xuICAgIExDX0FQSS5vbl9tZXNzYWdlID0gKGRhdGEpID0+IHRoaXMub25NZXNzYWdlLm5leHQoZGF0YSk7XG4gICAgTENfQVBJLm9uX3Bvc3RjaGF0X3N1cnZleV9zdWJtaXR0ZWQgPSAoZGF0YSkgPT4gdGhpcy5vblBvc3RjaGF0U3VydmV5U3VibWl0dGVkLm5leHQoZGF0YSk7XG4gICAgTENfQVBJLm9uX3ByZWNoYXRfc3VydmV5X3N1Ym1pdHRlZCA9IChkYXRhKSA9PiB0aGlzLm9uUHJlY2hhdFN1cnZleVN1Ym1pdHRlZC5uZXh0KGRhdGEpO1xuICAgIExDX0FQSS5vbl9yYXRpbmdfY29tbWVudF9zdWJtaXR0ZWQgPSAoZGF0YSkgPT4gdGhpcy5vblJhdGluZ0NvbW1lbnRTdWJtaXR0ZWQubmV4dChkYXRhKTtcbiAgICBMQ19BUEkub25fcmF0aW5nX3N1Ym1pdHRlZCA9IChkYXRhKSA9PiB0aGlzLm9uUmF0aW5nU3VibWl0dGVkLm5leHQoZGF0YSk7XG4gICAgTENfQVBJLm9uX3RpY2tldF9jcmVhdGVkID0gKGRhdGEpID0+IHRoaXMub25UaWNrZXRDcmVhdGVkLm5leHQoZGF0YSk7XG4gIH1cblxuICBwcml2YXRlIF9zZXRNZXRob2RzKExDX0FQSTogTGl2ZUNoYXRXaWRnZXRBcGlNb2RlbCkge1xuICAgIHRoaXMuYWdlbnRzQXJlQXZhaWxhYmxlID0gKCkgPT4gTENfQVBJLmFnZW50c19hcmVfYXZhaWxhYmxlKCk7XG4gICAgdGhpcy5jaGF0UnVubmluZyA9ICgpID0+IExDX0FQSS5jaGF0X3J1bm5pbmcoKTtcbiAgICB0aGlzLmNoYXRXaW5kb3dIaWRkZW4gPSAoKSA9PiBMQ19BUEkuY2hhdF93aW5kb3dfaGlkZGVuKCk7XG4gICAgdGhpcy5jaGF0V2luZG93TWF4aW1pemVkID0gKCkgPT4gTENfQVBJLmNoYXRfd2luZG93X21heGltaXplZCgpO1xuICAgIHRoaXMuY2hhdFdpbmRvd01pbmltaXplZCA9ICgpID0+IExDX0FQSS5jaGF0X3dpbmRvd19taW5pbWl6ZWQoKTtcbiAgICB0aGlzLmNsb3NlQ2hhdCA9ICgpID0+IExDX0FQSS5jbG9zZV9jaGF0KCk7XG4gICAgdGhpcy5nZXRDaGF0SWQgPSAoKSA9PiBMQ19BUEkuZ2V0X2NoYXRfaWQoKTtcbiAgICB0aGlzLmdldENoYXRzTnVtYmVyID0gKCkgPT4gTENfQVBJLmdldF9jaGF0c19udW1iZXIoKTtcbiAgICB0aGlzLmdldExhc3RWaXNpdFRpbWVzdGFtcCA9ICgpID0+IExDX0FQSS5nZXRfbGFzdF92aXNpdF90aW1lc3RhbXAoKTtcbiAgICB0aGlzLmdldFBhZ2VWaWV3c051bWJlciA9ICgpID0+IExDX0FQSS5nZXRfcGFnZV92aWV3c19udW1iZXIoKTtcbiAgICB0aGlzLmdldFZpc2l0b3JJZCA9ICgpID0+IExDX0FQSS5nZXRfdmlzaXRvcl9pZCgpO1xuICAgIHRoaXMuZ2V0VmlzaXRzTnVtYmVyID0gKCkgPT4gTENfQVBJLmdldF92aXNpdHNfbnVtYmVyKCk7XG4gICAgdGhpcy5oaWRlQ2hhdFdpbmRvdyA9ICgpID0+IExDX0FQSS5oaWRlX2NoYXRfd2luZG93KCk7XG4gICAgdGhpcy5taW5pbWl6ZUNoYXRXaW5kb3cgPSAoKSA9PiBMQ19BUEkubWluaW1pemVfY2hhdF93aW5kb3coKTtcbiAgICB0aGlzLm9wZW5DaGF0V2luZG93ID0gKCkgPT4gTENfQVBJLm9wZW5fY2hhdF93aW5kb3coKTtcbiAgICB0aGlzLnNldEN1c3RvbVZhcmlhYmxlcyA9ICh0KSA9PiBMQ19BUEkuc2V0X2N1c3RvbV92YXJpYWJsZXModCk7XG4gICAgdGhpcy5zZXRWaXNpdG9yRW1haWwgPSAodCkgPT4gTENfQVBJLnNldF92aXNpdG9yX2VtYWlsKHQpO1xuICAgIHRoaXMuc2V0VmlzaXRvck5hbWUgPSAodCkgPT4gTENfQVBJLnNldF92aXNpdG9yX25hbWUodCk7XG4gICAgdGhpcy50cmlnZ2VyU2FsZXNUcmFja2VyID0gKGUsIHQpID0+IExDX0FQSS50cmlnZ2VyX3NhbGVzX3RyYWNrZXIoZSwgdCk7XG4gICAgdGhpcy51cGRhdGVDdXN0b21WYXJpYWJsZXMgPSAodCkgPT4gTENfQVBJLnVwZGF0ZV9jdXN0b21fdmFyaWFibGVzKHQpO1xuICAgIHRoaXMudmlzaXRvckVuZ2FnZWQgPSAoKSA9PiBMQ19BUEkudmlzaXRvcl9lbmdhZ2VkKCk7XG4gICAgdGhpcy52aXNpdG9yUXVldWVkID0gKCkgPT4gTENfQVBJLnZpc2l0b3JfcXVldWVkKCk7XG4gIH1cbn1cbiJdfQ==